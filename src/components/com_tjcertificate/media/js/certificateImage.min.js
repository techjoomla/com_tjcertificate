jQuery(document).ready(function(){certificateImage.generateImage(document.querySelector("#certificateContent"))});var certificateImage={printCertificate:function(e){var t=document.getElementById(e).innerHTML,a=document.body.innerHTML;document.body.innerHTML=t,window.print(),document.body.innerHTML=a},uploadImage:function(e){var t=!1,a=jQuery("#certificateId").val();return jQuery.ajax({url:Joomla.getOptions("system.paths").base+"/index.php?option=com_tjcertificate&task=certificate.uploadCertificate",type:"POST",dataType:"text",data:{image:e,certificateId:a},success:function(e){t=e}}),t},generateImage:function(e){var t=jQuery("#certificateId").val(),a=Joomla.getOptions("system.paths").base+"/media/com_tjcertificate/certificates/",n=document.createElement("img");html2canvas(e,{scale:2,scrollX:0,scrollY:-window.scrollY,backgroundColor:null,allowTaint:!0}).then(function(e){jQuery("#certificateContent").hide(),certificateImage.uploadImage(e.toDataURL("image/png")),n.src=a+t+".png",jQuery("#previewImage").append(n),jQuery("#btn-Convert-Html2Image").attr("download",t+".png").attr("href",e.toDataURL("image/png"))})}};
