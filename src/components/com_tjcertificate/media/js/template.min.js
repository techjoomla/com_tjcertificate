var template={previewTemplate:function(e){jQuery(document).on("click",'button[data-target="#templatePreview"]',function(){jQuery("#show-info").hide();var t=jQuery("#"+e);if("undefined"!=typeof tinyMCE)tinyMCE.execCommand("mceToggleEditor",!1,e);else if("undefined"!=typeof CodeMirror){var r=document.querySelector(".CodeMirror").CodeMirror;t.html(r.getValue())}else jQuery("#show-info").show();jQuery("#previewTempl").empty(),jQuery("<style>").html(jQuery("#jform_template_css").val()).appendTo("#previewTempl"),jQuery("<div>").html(t.val()).appendTo("#previewTempl")}),jQuery("#templatePreview").on("hidden.bs.modal",function(){"undefined"!=typeof tinyMCE&&tinyMCE.execCommand("mceToggleEditor",!1,e),jQuery("#previewTempl").empty()})},loadDefaultTemplate:function(e){var t={};if(""==e||void 0===e)return!1;t.defaultTemplate=e,tjCertificateService.loadDefaultTemplate(t).fail(function(e){var t={error:[e.responseText]};Joomla.renderMessages(t)}).done(function(e){if(!e.success&&e.message){var t={error:[e.message]};Joomla.renderMessages(t)}e.messages&&Joomla.renderMessages(e.messages),e.success&&template.renderDefaultTemplate(e)})},renderDefaultTemplate:function(e){var t=e.data;if(jQuery("#jform_body").empty().val(t),"undefined"!=typeof tinyMCE)tinyMCE.get("jform_body").setContent(t);else if("undefined"!=typeof CodeMirror){document.querySelector(".CodeMirror").CodeMirror.setValue(t)}},renderCustomTemplate:function(e){var t=Joomla.getOptions("system.paths").base;jQuery.ajax({url:t+"/index.php?option=com_tjcertificate&task=template.loadCustomTemplate&format=json",type:"POST",data:{templateId:e},success:function(e){var t=e.data;if(jQuery("#jform_generated_body").empty().val(t),"undefined"!=typeof tinyMCE)tinyMCE.get("jform_generated_body").setContent(t);else if("undefined"!=typeof CodeMirror){document.querySelector(".CodeMirror").CodeMirror.setValue(t)}}})}};
